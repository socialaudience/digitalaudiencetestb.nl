<style>
    body {
        background-color: lightblue;
    }
</style>
<body>
    <h1>digitalaudiencetestb.nl</h1>
    <pre>
        <code id="data"></code>
    </pre>
    <script>
        let s = document.createElement('script');
        s.src = "https://cookiebaker.test.digitalaudience.link/bakery/scripts_dev/da_dev.js";
        s.addEventListener("load", (e) => {
            __da.bake({ car: 0, chips: 1 }); s.remove();
        }, false);
        document.body.appendChild(s);
    </script>
    <!--<iframe src="https://www.digitalaudiencetesta.nl">

    </iframe>-->

    <script>
        const output = document.getElementById("data");

        function checkAccess() {
            //Check if hasStorageAccess
            document.hasStorageAccess().then((hasAccess) => {
                if (hasAccess) {
                    // You can access storage in this context
                } else {
                    // You have to request storage access
                    requestAccess();
                }
            });
        }

        function requestAccess() {
            navigator.permissions.query({ name: 'storage-access' }).then(res => {
                if (res.state === 'granted') {
                    // Permission has already been granted
                    // You can request storage access without any user gesture
                    rSA();
                } else if (res.state === 'prompt') {
                    // Requesting storage access requires user gesture
                    // For example, clicking a button
                    const btn = document.createElement("button");
                    btn.textContent = "Grant access";
                    btn.addEventListener('click', () => {
                        // Request storage access
                        rSA();
                    });
                    document.body.appendChild(btn);
                }
            });
        }

        function rSA() {
            if ('requestStorageAccess' in document) {
                document.requestStorageAccess().then(
                    (res) => {
                        // Use storage access
                    },
                    (err) => {
                        // Handle errors
                    }
                );
            }
        }

        checkAccess();
    </script>
</body>
